{{! shopping.hbs }}
 
{{#extends "layout"}}
 
    {{#block "scripts"}}
    {{/block}}
 
    {{#block "content" mode="append"}}

        {{#*inline "search-shopping"}}
        <h5>
            Search Products:
        </h5>
            <form id="search-recipes" action="" method="">
                Purchase Date: <input type="date" name="purchase_date" value="">
                Meal Plan Range: <input type="date" name="meal_plan_range" value="">
                <input type="button" value="Search" onclick="searchRecipes()"
            </form>
        {{/inline}}

        {{> search-shopping}}

        {{#*inline "shopping-add"}}
        <h5>
            Add new Shopping List:
        </h5>
            <table class="u-full-width">
                <thead>
                    <tr>
                        <th>Purchase Date</th>
                        <th>Meal Plan Range</th>
                        <th>Add</th>
                    </tr>
                </thead>
                <tbody>
                        <tr>
                            <form method="POST">
                                <td><input type="date" value="{{purchase_date}}" id="{{purchase_date}}"></td>
                                <td><input type="date" value="{{meal_plan_range}}" id="{{meal_plan_range}}"></td>
                                <td><input type="submit" value="✅" id="" formaction="" action="/create"></td>
                            </form>
                        </tr>
                </tbody>
            </table>
        {{/inline}}
        {{> shopping-add}}

        {{#*inline "shopping-table"}}
        <h5>
            Current Shopping Lists:
        </h5>
            <table class="u-full-width">
                <thead>
                    <tr>
                        <th>Purchase Date</th>
                        <th>Meal Plan Range</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>

                    {{#each Results}}
                        <tr>
                            <form method="POST">
                                <td><input type="datetime" value="{{purchase_date}}" id="{{purchase_date}}"></td>
                                <td><input type="datetime" value="{{meal_plan_range}}" id="{{meal_plan_range}}"></td>
                                <td><input type="submit" value="📝" onclick="updateShoppingList({{purchase_date}})" action="/update"></td>
                                <td><input type="submit" value="❌" id="" formaction="/shopping/delete({{purchase_date}})" action="/delete"></td>
                            </form>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        {{/inline}}

        {{> shopping-table}}

    {{/block}}
 
{{/extends}}